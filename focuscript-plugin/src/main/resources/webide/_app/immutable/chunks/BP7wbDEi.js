import{H as I,I as U,J as m,K as Y,x as R,L as T,m as P,C as x,M as F,N as C,O as $,n as q,P as H,Q as Z,R as z,S as G,F as J,U as p,V as K,W as Q,b as M,X as V,Y as N,o as O,Z as W,_ as w,g,$ as X,a0 as j,a1 as ee,a2 as se,a3 as te,a4 as re,y as ae,a5 as ie,w as ne,a6 as fe,a7 as ue,a8 as ce,a9 as de,aa as oe,f as he,ab as _e,ac as le}from"./AJ__dmnR.js";import{s as ve,g as be}from"./D_MtdXbD.js";class ge{anchor;#s=new Map;#t=new Map;#e=new Map;#r=new Set;#a=!0;constructor(e,r=!0){this.anchor=e,this.#a=r}#i=()=>{var e=I;if(this.#s.has(e)){var r=this.#s.get(e),t=this.#t.get(r);if(t)U(t),this.#r.delete(r);else{var i=this.#e.get(r);i&&(this.#t.set(r,i.effect),this.#e.delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),t=i.effect)}for(const[a,f]of this.#s){if(this.#s.delete(a),a===e)break;const n=this.#e.get(f);n&&(m(n.effect),this.#e.delete(f))}for(const[a,f]of this.#t){if(a===r||this.#r.has(a))continue;const n=()=>{if(Array.from(this.#s.values()).includes(a)){var d=document.createDocumentFragment();F(f,d),d.append(R()),this.#e.set(a,{effect:f,fragment:d})}else m(f);this.#r.delete(a),this.#t.delete(a)};this.#a||!t?(this.#r.add(a),Y(f,n,!1)):n()}}};#n=e=>{this.#s.delete(e);const r=Array.from(this.#s.values());for(const[t,i]of this.#e)r.includes(t)||(m(i.effect),this.#e.delete(t))};ensure(e,r){var t=I,i=C();if(r&&!this.#t.has(e)&&!this.#e.has(e))if(i){var a=document.createDocumentFragment(),f=R();a.append(f),this.#e.set(e,{effect:T(()=>r(f)),fragment:a})}else this.#t.set(e,T(()=>r(this.anchor)));if(this.#s.set(t,e),i){for(const[n,u]of this.#t)n===e?t.unskip_effect(u):t.skip_effect(u);for(const[n,u]of this.#e)n===e?t.unskip_effect(u.effect):t.skip_effect(u.effect);t.oncommit(this.#i),t.ondiscard(this.#n)}else P&&(this.anchor=x),this.#i()}}function Ee(s,e,r=!1){P&&q();var t=new ge(s),i=r?H:0;function a(f,n){if(P){const d=Z(s)===z;if(f===d){var u=G();J(u),t.anchor=u,p(!1),t.ensure(f,n),p(!0);return}}t.ensure(f,n)}$(()=>{var f=!1;e((n,u=!0)=>{f=!0,a(u,n)}),f||a(!1,null)},i)}function D(s,e){return s===e||s?.[N]===e}function ye(s={},e,r,t){return K(()=>{var i,a;return Q(()=>{i=a,a=[],M(()=>{s!==r(...a)&&(e(s,...a),i&&D(r(...i),s)&&e(null,...i))})}),()=>{V(()=>{a&&D(r(...a),s)&&e(null,...a)})}}),s}let b=!1,E=Symbol();function Ae(s,e,r){const t=r[e]??={store:null,source:W(void 0),unsubscribe:O};if(t.store!==s&&!(E in r))if(t.unsubscribe(),t.store=s??null,s==null)t.source.v=void 0,t.unsubscribe=O;else{var i=!0;t.unsubscribe=ve(s,a=>{i?t.source.v=a:w(t.source,a)}),i=!1}return s&&E in r?be(s):g(t.source)}function Ie(s,e){return s.set(e),e}function Re(){const s={};function e(){X(()=>{for(var r in s)s[r].unsubscribe();j(s,E,{enumerable:!1,value:!0})})}return[s,e]}function Se(s){var e=b;try{return b=!1,[s(),b]}finally{b=e}}function Te(s,e,r,t){var i=!ne||(r&fe)!==0,a=(r&ue)!==0,f=(r&le)!==0,n=t,u=!0,d=()=>(u&&(u=!1,n=f?M(t):t),n),h;if(a){var L=N in s||oe in s;h=ee(s,e)?.set??(L&&e in s?c=>s[e]=c:void 0)}var _,y=!1;a?[_,y]=Se(()=>s[e]):_=s[e],_===void 0&&t!==void 0&&(_=d(),h&&(i&&se(),h(_)));var o;if(i?o=()=>{var c=s[e];return c===void 0?d():(u=!0,c)}:o=()=>{var c=s[e];return c!==void 0&&(n=void 0),c===void 0?n:c},i&&(r&te)===0)return o;if(h){var k=s.$$legacy;return(function(c,v){return arguments.length>0?((!i||!v||k||y)&&h(v?o():c),c):o()})}var S=!1,l=((r&_e)!==0?he:ce)(()=>(S=!1,o()));a&&g(l);var B=ae;return(function(c,v){if(arguments.length>0){const A=v?g(l):i&&a?re(c):c;return w(l,A),S=!0,n!==void 0&&(n=A),c}return de&&S||(B.f&ie)!==0?l.v:g(l)})}export{ge as B,Ae as a,ye as b,Ie as c,Ee as i,Te as p,Re as s};
